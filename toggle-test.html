<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Dark Mode Toggle Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 50px;
            background: #f0f9ff;
            transition: all 0.3s ease;
        }
        
        body.dark {
            background: #1e1e1e;
            color: #f3f4f6;
        }

        /* Simple Working Dark Mode Toggle */
        #toggle-bg {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            transition: all 0.3s ease;
        }

        #toggle-bg.dark {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }

        #toggle-dot {
            transition: all 0.3s ease;
        }

        #toggle-dot.moved {
            transform: translateX(28px);
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        body.dark .container {
            background: #2a2a2a;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéõÔ∏è Fixed Dark Mode Toggle</h1>
        <p>This toggle will definitely work and slide smoothly!</p>
        
        <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin: 30px 0;">
            <span>‚òÄÔ∏è</span>
            <label style="position: relative; display: inline-flex; align-items: center; cursor: pointer;">
                <input type="checkbox" id="dark-toggle" style="opacity: 0; position: absolute;" onchange="toggleDark()" />
                <!-- Toggle Background -->
                <div id="toggle-bg" style="width: 56px; height: 28px; border-radius: 14px; position: relative; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);">
                    <!-- Toggle Dot -->
                    <div id="toggle-dot" style="position: absolute; top: 4px; left: 4px; width: 20px; height: 20px; background: white; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center; font-size: 12px;">
                        ‚òÄÔ∏è
                    </div>
                </div>
            </label>
            <span>üåô</span>
        </div>

        <div style="margin-top: 30px;">
            <h3>Status:</h3>
            <p id="status">Light Mode Active</p>
            <button onclick="testToggle()" style="margin-top: 20px; padding: 10px 20px; background: #3b82f6; color: white; border: none; border-radius: 6px; cursor: pointer;">
                Test Toggle Programmatically
            </button>
        </div>

        <div style="margin-top: 30px; text-align: left;">
            <h3>‚úÖ What's Working:</h3>
            <ul>
                <li>‚úÖ Toggle slides smoothly (28px)</li>
                <li>‚úÖ Background gradient changes</li>
                <li>‚úÖ Icon changes (‚òÄÔ∏è ‚Üî üåô)</li>
                <li>‚úÖ Theme persistence</li>
                <li>‚úÖ Smooth animations (0.3s)</li>
            </ul>
        </div>
    </div>

    <script>
        function toggleDark() {
            // Toggle dark mode
            document.body.classList.toggle("dark");
            const isDark = document.body.classList.contains("dark");
            
            // Get toggle elements
            const toggleBg = document.getElementById('toggle-bg');
            const toggleDot = document.getElementById('toggle-dot');
            const toggleInput = document.getElementById('dark-toggle');
            const status = document.getElementById('status');
            
            if (isDark) {
                // Switching to dark mode
                if (toggleBg) toggleBg.classList.add('dark');
                if (toggleDot) {
                    toggleDot.classList.add('moved');
                    toggleDot.textContent = 'üåô';
                }
                if (toggleInput) toggleInput.checked = true;
                if (status) status.textContent = 'Dark Mode Active';
            } else {
                // Switching to light mode
                if (toggleBg) toggleBg.classList.remove('dark');
                if (toggleDot) {
                    toggleDot.classList.remove('moved');
                    toggleDot.textContent = '‚òÄÔ∏è';
                }
                if (toggleInput) toggleInput.checked = false;
                if (status) status.textContent = 'Light Mode Active';
            }
            
            // Save theme preference
            localStorage.setItem("toggle-theme", isDark ? "dark" : "light");
        }

        function testToggle() {
            const toggleInput = document.getElementById('dark-toggle');
            toggleInput.click();
        }

        // Load saved theme on page load
        window.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem("toggle-theme");
            if (savedTheme === "dark") {
                document.getElementById('dark-toggle').checked = true;
                toggleDark();
            }
        });
    </script>
</body>
</html>